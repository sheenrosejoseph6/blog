<!doctype html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="description" content="Arrow Framework">
<meta name="author" content="Michael Bowlin">

<title>
  
    Local Storage Tutorial 2 &middot; 5daily.io || Blog
  
</title>

<!--  -->
  <!-- Stylesheets -->
  <link href="/dist/css/blog-base.css" rel="stylesheet">
  <link href="/dist/css/blog-components.css" rel="stylesheet">
  <link href="/assets/css/prism.css" rel="stylesheet">
  <!-- NEEDS A HOME -->
  <link href="/dist/css/needsahome.css" rel="stylesheet">



<!--   <link href="/assets/css/docs.css" rel="stylesheet"> -->

  <!-- Favicons -->
  <link rel="../apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-precomposed.png">
  <link rel="../shortcut icon" href="../assets/ico/favicon.ico">
<!--  -->



  <!-- Modernizr for touch detection and IE8 support of HTML5 elements
       Keep this at the top for as long as you support IE8 -->
<!-- 
  <script src="/assets/js/vendor/modernizr-2.8.3.min.js"></script>
 -->

<!-- App stuff -->
<meta name="apple-mobile-web-app-title" content="Blog Framework">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- Place anything custom after this. -->
  </head>
  <body>

<div class="container">
  
  <div class="row">
    <div class="col md-12">
      <div class="row">
        <!-- HEADER -->
        <div class="col xs-2 sm-2 md-2" id="side-nav">
          <ul>
            <li><a href="/">HOME</a></li>
            <li><a href="/html5">HTML5</a></li>
            <li><a href="/css3">CSS3</a></li>
            <li><a href="/javascript">JAVASCRIPT</a></li>
            <li><a href="/uiux">UI/UX</a></li>
          </ul>   
        </div>
        <div class="col xs-10 sm-10 md-10" id="body">
          <div class="row">
            <div class="col md-12" id="banner">
              
              
                <div class="sub-nav">
	<ul>
	  <li><a href="/">HTML5</a></li>
	</ul>             
</div>                
              


            </div>
          </div>
          <div class="row col md-12">
             <div class="content">
                <!--!!!!!!!!!!!!!!!!! PRISMjs need class language-css-->

<h2 id="local-storage-tutorial">Local Storage Tutorial</h2>

<blockquote>
  <p>HTML 5 technologies used:</p>

  <ul>
    <li><a href="#contenteditable-overview">Contenteditable</a></li>
    <li><a href="#local-storage-overview">Local Storage</a> </li>
    <li><a href="#drag-and-drop-overview">Drag and Drop</a>
      <ul>
        <li><i style="font-size:10px;">based on Advanced To-Do List with Joseph Lowery</i></li>
      </ul>
    </li>
  </ul>
</blockquote>

<!--
	*
	*
	*	Contenteditable Overview
	*
	*
-->

<h2 id="contenteditable-overview">Contenteditable Overview</h2>

<ul>
  <li>makes any page area editable in the browser</li>
  <li>single attribute: contenteditable
    <ul>
      <li>“true”</li>
      <li>“false”</li>
      <li>“inherit”</li>
    </ul>
  </li>
  <li>Browser support
    <ul>
      <li><a href="http://caniuse.com/#search=contenteditable">Current support - Caniuse.com </a></li>
    </ul>
  </li>
  <li>Making content editable
    <ul>
      <li>To make content editable to any element in an HTML document you simply need to add the contentediable attribute:</li>
    </ul>
  </li>
</ul>

<!-- Code Snippet -->
<pre><code>&lt;div id="container"&gt;
	&lt;ul id="list" contenteditable&gt;
		&lt;li&gt;Item 1&lt;/li&gt;
		&lt;li&gt;Item 2&lt;/li&gt;
	&lt;/ul&gt;
&lt;/div&gt;
</code></pre>

<!-- CodePen -->
<p data-height="204" data-theme-id="10000" data-slug-hash="RNwMeJ" data-default-tab="result" data-user="5daily" class="codepen">See the Pen <a href="http://codepen.io/5daily/pen/RNwMeJ/">HTML5 - contenteditable example</a> by 5daily (<a href="http://codepen.io/5daily">@5daily</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async="" src="//assets.codepen.io/assets/embed/ei.js"></script>

<!--
	*
	*
	*	Local Storage Overview
	*
	*
-->

<h2 id="local-storage-overview">Local Storage Overview</h2>

<ul>
  <li>Simple and brings the concept of “state” to websites without server-side coding.
    <ul>
      <li>Local Storage vs. Cookies
        <ul>
          <li>Unlike cookie, it is stored in the browser</li>
          <li>5 MB limit vs. 4kb for cookie</li>
        </ul>
      </li>
      <li>Uses simple name/value pair structure (string only)
        <ul>
          <li>Two simple commands:
            <ul>
              <li>Set Item
                <ul>
                  <li>localStorage.setItem(“ItemName”, “ItemValue”);</li>
                </ul>
              </li>
              <li>Get Item
                <ul>
                  <li>localStorage.getItem(“ItemName”);</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="http://caniuse.com/#search=web%20storage">Current support - Caniuse.com </a>	</li>
    </ul>
  </li>
</ul>

<!-- Code Snippet -->
<p>HTML code:</p>

<pre><code>&lt;div id="container"&gt;
	&lt;ul id="list2" contenteditable&gt;
		&lt;li&gt;Item 1&lt;/li&gt;
		&lt;li&gt;Item 2&lt;/li&gt;
	&lt;/ul&gt;
	&lt;p&gt;&lt;a href=javascript.void(); id="saveAll"&gt; Save All &lt;/a&gt;&lt;/p&gt;
	&lt;p&gt;&lt;a href=javascript.void(); id="clearAll"&gt; Clear All &lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</code></pre>

<!-- Code Snippet -->
<p>Javascript code:</p>

<pre><code>&lt;script&gt;
	$(document).ready(function(){
		var theList = document.getElementById('list2');
		$('#saveAll').click(function(e){
			e.preventDefault();
			// set item (todoList) and put in theList
			localStorage.setItem('todoList', theList.innerHTML);
		});
		$('#clearAll').click(function(e){
			e.preventDefault();
			// clear all the items
			localStorage.clear();
			// reload the page
			location.reload();
		});

		// Bring in local storage items when page loads
		loadToDo();

		function loadToDo(){
			// only load in entries if they exist
			if(localStorage.getItem('todoList')) {

				theList.innerHTML = localStorage.getItem('todoList');
			}
		}
	});
&lt;/script&gt;
</code></pre>

<!-- 
	Above code in practice
	script lives in default.html
 -->

<div id="container">
    <ul id="list2" contenteditable="">
      <li>Enjoy life :)</li>
    </ul>
  <p>
  	<a href="#" id="saveAll">Save All</a>
  	<a href="#" id="clearAll">Clear All</a></p>
</div>

<!--
	*
	*
	*	Drag and Drop Overview
	*
	*
-->

<h2 id="drag-and-drop-overview">Drag and Drop Overview</h2>

<ul>
  <li>HTML5 Attribute
    <ul>
      <li>One attribute called draggable.</li>
    </ul>
  </li>
</ul>

<pre><code>&lt;div id="" class="" draggable="true"&gt;&lt;/div&gt;
</code></pre>
<ul>
  <li>Javascript API
    <ul>
      <li>Seven JS Events
        <ul>
          <li>dragstart();</li>
          <li>drag();</li>
          <li>dragover();</li>
          <li>dragenter();</li>
          <li>dragleave();</li>
          <li>dragenter();</li>
          <li>drop();</li>
        </ul>
      </li>
      <li>Data Transfer (key related object)
        <ul>
          <li>dataTransfer
      * used to drag the data from a dragged object
            <ul>
              <li>Set: in the dragstart() event</li>
              <li>Put: in the drop() event</li>
            </ul>
          </li>
          <li><a href="http://caniuse.com/#search=drag%20and%20drop">Current support - Caniuse.com </a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<!-- Code Snippet -->
<p>HTML code:</p>

<pre><code> &lt;div id="drag-container"&gt;
 	&lt;form name="form1" method="post" action=""&gt;
	 	&lt;input type="text" name="toDoItem" id="toDoItem" autofocus&gt;&lt;/input&gt;
	 	&lt;input type="button" name="addToDo" id="addToDo" value="Add List Item"&gt;&lt;/input&gt;
 	&lt;/form&gt;
 	&lt;ul id="theList" class="sortable list"&gt;
 	&lt;/ul&gt;
 	&lt;p id="doClearAll"&gt;&lt;a href="#"&gt; Clear All &lt;/a&gt;&lt;/p&gt;
 &lt;/div&gt;

&lt;!-- 
 !!! Need to also add html5 sortable plugin
	this is a lighter version of the jQueryUI sortable
	&lt;script src="/assets/js/jquery.sortable.min.js"&gt;&lt;/script&gt;
 !!! add mySortable.js
 	** detailed notes in file
	&lt;script src="/assets/js/mySortable.js"&gt;&lt;/script&gt;
--&gt;
</code></pre>

<!-- Code Snippet -->
<p>Javascript code: mySortable.js</p>

<pre><code>&lt;script&gt;
$(document).ready(function(){
	 /* holds the code for the new list item */
	var newListItem; 
	/*flag to determine if we've done a list or not*/
	var newList = true;
	var theList = document.getElementById('theList');

	$('#addToDo').on('click', function(e){
		e.preventDefault();
		/* is this the first time a new list item has been added by checking the flag*/
		if (newList == true){
			/*get the value from the input feild*/
			var theValue = $("#toDoItem").val();
			/*build up list item code
			!!! we're using the input tag instead of the contenteditable due to conflict
			in the current webkit browsers*/
			newListItem = '&lt;li&gt;&lt;span class="handle"&gt; :: &lt;/span&gt; &lt;input class="listItem" value="' + theValue + '"&gt;&lt;a class="removeListItem" style="display:none;" href="#"&gt; X &lt;/a&gt; &lt;/li&gt;';
			newList = false;
		} else {
			var theValue = $("#toDoItem").val();
			/*clone the last item in the list 
			substitute it's value with what the user input*/
			newListItem = $('#theList li:last').clone();
			newListItem.find('input').attr('value', theValue);
		}

		/*determine if showing the clearall link
		it's hidden when there is just one list item*/
		var theCount = $("#theList li").length + 1;
		if(theCount &gt; 1) {
			$('#doClearAll').css('display','block');
		}

		/*add new item*/
		$('#theList').append(newListItem);

		/*house-keeping

		clear the value the user put in to the newListItem*/
		$('#toDoItem').val('');
		/*reset it's focus*/
		$('#toDoItem').focus();
		/*bring sortable library in*/
		$('.sortable').sortable('destroy');
		/*target span to act as our handle*/
		$('.sortable').sortable({
			handle: '.handle'
		});

		/*LOCAL STORAGE (this step is repeated)*/
		localStorage.setItem('todoListPlus',theList.innerHTML);
	});

	/*if user clicks return*/
	$('input[type="text"]').on('keydown', function(e){
		/*charCode is Character Code
		Ternary Operator*/
		var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;

		if(key == 13) {
			/*stop it from it's normal focusing*/
			e.preventDefault();
			/*put the focus on the input feild*/
			var inputs = $(this).closest('form').find(':input:visible');
			/*set the focus. + 1 moves it out one*/
			inputs.eq( inputs.index(this) + 1).focus();
		}
	});

	/*handle and edits that are made to the list items
	look for a change event on the .listitem which is inside the list

	set up event handler -- #theList is our ul tag*/
	$('#theList').on('change', '.listItem', function(){
		/*pick up the just entered current value*/
		currentValue = $(this).val();
		/*doing it this way to ensure that the DOM is changed
		instead of just using the jQuery val property
		critical for saving our list later*/
		$(this).attr('value', currentValue);

		/*LOCAL STORAGE (this step is repeated)*/
		localStorage.setItem('todoListPlus',theList.innerHTML);
	});

	/*create an empty function that checks to see if the list has been resorted
	need for automatically saving our list
	HTML5 sortable plugin makes it easy*/
	$('.sortable').sortable().bind('sortupdate', function(){
		/*LOCAL STORAGE (this step is repeated)*/
		localStorage.setItem('todoListPlus',theList.innerHTML)
	});

	/*add the functionality to remove list items one at a time*/

	/*1) show the red x when a user hovers*/
	$('#theList').on('mouseover','li',function(){
		var $thisA = $(this).find('a');
		$thisA.css('display','block');

	});
	/*2) Hide hover out*/
	$('#theList').on('mouseout','li',function(){
		var $thisA = $(this).find('a');
		$thisA.css('display','none');
		
	});
	/*3) Delete the li when the x is clicked*/
	$('#theList').on('click','.removeListItem', function(e){
		e.preventDefault();
		$(this).parent().remove();

		// LOCAL STORAGE (this step is repeated)
		localStorage.setItem('todoListPlus',theList.innerHTML)
	});

	/*clear all link
	#doClearAll assigned to p tag that's holding link*/
	$('#doClearAll').on('click','#clearAll', function(){
		e.preventDefault();
		/*remove all childen of the list*/
		$('#thisList').childen().remove();

		/*House-keeping*/
		newList = true;
		/*reset flag to true*/
		$('#toDoItem').val();
		$('#doClearAll').css('display','none');
		/*reset the focus to input feild*/
		$('#toDoItem').focus();

		/*LOCAL STORAGE (this step is repeated)*/
		localStorage.setItem('todoListPlus',theList.innerHTML)
	});

	/*on page load retrive all of the list items*/
	loadToDo();

	function loadToDo() {
		/*if our local storage exists: get it and set it to the innerHTML of the list*/
		if(localStorage.getItem('todoListPlus')) {
			theList.innerHTML = localStorage.getItem('todoListPlus');
		
			/*house-keeping*/

			/*bring sortable library in*/
			$('.sortable').sortable('destroy');
			/*target span to act as our handle*/
			$('.sortable').sortable({
				handle: '.handle'
			});

			/*determine if showing the clearall link
			it's hidden when there is just one list item*/
			var theCount = $("#theList li").length + 1;
			if(theCount &gt; 1) {
				$('#doClearAll').css('display','block');
			}

		}
	}

});

&lt;/script&gt;
</code></pre>

<!-- 
	Above code in practice
	script lives in default.html
 -->
<h2>DEMO </h2>
<div id="drag-container">
 	<form name="form1" method="post" action="">
	 	<input type="text" name="toDoItem" id="toDoItem" autofocus="" />
	 	<input type="button" name="addToDo" id="addToDo" value="Add List Item" />
 	</form>
 	<ul id="theList" class="sortable list">
 	</ul>
 	<p id="doClearAll"><a href="#"> Clear All </a></p>
 </div>


            </div>            
          </div>
        </div>





      </div>



    </div>
  </div><!--/. row--> 




</div><!--/. container-->










  



 <footer class="ar-footer" role="contentinfo">
<!--   <section class="colophon">

        
    <ul class="list inline">
      <li>Framework v0.1.0</li>
      <li class="muted">&middot;</li>
      <li><a href="https://github.com/michaelbowlin/blog">GitHub</a></li>
      <li class="muted">&middot;</li>
      <li><a href="https://github.com/michaelbowlin/blog/issues?state=open">Issues</a></li>
      <li class="muted">&middot;</li>
      <li><a href="https://github.com/michaelbowlin/blog/releases">Releases</a></li>
    </ul>
  </section> -->
  <section class="copyright-info">
    <p class="copyright">&copy; 2014-15 || 5daily.io || All Rights Reserved</p>
    <ul class="footer-links">
<!--       <li><a href="#">Contact Us</a></li>
      <li><a href="#">Privacy Policy</a></li>
      <li><a href="#">Terms of Use</a></li> -->
    </ul>
  </section>
</footer>


<!-- JavaScript
================================================== -->

<script src="https://apex.oracle.com/i/libraries/apex/minified/desktop_all.min.js?v=4.2.5.00.08"></script>
<script src="https://apex.oracle.com/i/libraries/apex/minified/legacy.min.js?v=4.2.5.00.08"></script>



 
  <script src="/assets/js/prism.js"></script>
  <script src="/assets/js/jquery.sortable.min.js"></script>
  <script src="/assets/js/mySortable.js"></script>

<!-- Script for 2014-11-14-LocalStorageTutorial (need to move)-->      
<script>
  $(document).ready(function(){
 
    var theList = document.getElementById('list2');
    $("#saveAll").click(function(e) {
      e.preventDefault();
      localStorage.setItem('todoList', theList.innerHTML);
    });
    $("#clearAll").click(function(e) {
      e.preventDefault();
      localStorage.clear();
      location.reload();
    });
    
    loadToDo();
    
    function loadToDo() {
      if ( localStorage.getItem('todoList') ) {
      theList.innerHTML = localStorage.getItem('todoList'); 
      }
    }
  });
 </script>

<!-- Injecting Prism class --> 
<script>
  $(document).ready(function(){
    var codeblock = $('pre');
    codeblock.addClass('language-css');
  });
</script>



<!-- IE8 support
     Includes Selectivizr, Respond.js and IE8 Resposive File Warning -->
<!--[if lt IE 9]>
<script src="../assets/js/ie/selectivizr-1.0.2.min.js"></script>
<script src="../assets/js/ie/respond-1.4.2.min.js"></script>
<script src="../assets/js/ie/ie8-responsive-file-warning.js"></script>
<![endif]-->

<!-- Docs min Javascript
     Includes jQuery 1.11.1, Holder 2.4.0, Zero Clipboard 1.3.5 and the application JS -->
<!-- <script src="../assets/js/docs.min.js"></script> -->

<!-- More IE stuff:
     Includes IE10 Grayscale fix, emulation modes warning & viewport hacks for Surface/desktop Windows 8 bug -->

<!--[if IE]>
<script src="../assets/js/docs-ie.js"></script>
<![endif]-->

 
  </body>
</html>